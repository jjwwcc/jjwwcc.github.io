<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geography Flashcards</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .flashcard-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .card {
            display: none;
        }
        .card.active {
            display: block;
        }
        .question {
            font-size: 18px;
            margin-bottom: 15px;
        }
        .options {
            list-style-type: none;
            padding: 0;
        }
        .option {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px 15px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .option:hover {
            background-color: #efefef;
        }
        .option.selected {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .option.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .option.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        .feedback.correct {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .feedback.incorrect {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .explanation {
            margin-top: 15px;
            padding: 10px;
            background-color: #e9ecef;
            border-radius: 4px;
            display: none;
        }
        .progress {
            margin-bottom: 20px;
            font-size: 16px;
        }
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .stats div {
            text-align: center;
            flex: 1;
        }
    </style>
</head>
<body>
    <h1>Geography Flashcards</h1>
    
    <div class="stats">
        <div>
            <h3>Total</h3>
            <span id="totalCards">0</span>
        </div>
        <div>
            <h3>Correct</h3>
            <span id="correctAnswers">0</span>
        </div>
        <div>
            <h3>Incorrect</h3>
            <span id="incorrectAnswers">0</span>
        </div>
    </div>
    
    <div class="progress">
        Question <span id="currentCard">1</span> of <span id="totalCardsProgress">0</span>
    </div>
    
    <div class="flashcard-container">
        <div id="cards"></div>
        
        <div class="feedback" id="feedback"></div>
        <div class="explanation" id="explanation"></div>
        
        <div class="controls">
            <button id="prevBtn" disabled>Previous</button>
            <button id="checkBtn">Check Answer</button>
            <button id="nextBtn" disabled>Next</button>
        </div>
    </div>
    
    <script>
        // Sample data from markdown file
        const flashcardData = [
            {
                question: "1. Chinatown is an example of a",
                options: [
                    "A. functional region.",
                    "B. nodal region.",
                    "C. perceptual region.",
                    "D. formal region.",
                    "E. uniform region."
                ],
                correctAnswer: "C",
                explanation: "Chinatown is an example of a perceptual region. Perceptual regions are defined by people's feelings and attitudes about areas. They exist as intellectual concepts."
            },
            {
                question: "2. The map created by Lewis and Clark could be called a",
                options: [
                    "A. thematic map.",
                    "B. choropleth map.",
                    "C. graduated circle map.",
                    "D. general purpose map.",
                    "E. topographic map."
                ],
                correctAnswer: "D",
                explanation: "The map created by Lewis and Clark could be called a general purpose map. General purpose maps show a variety of features like roads, political boundaries, water, urban areas, and sometimes topography."
            }
        ];

        // App state
        let currentCardIndex = 0;
        let selectedOption = null;
        let answered = false;
        let correctCount = 0;
        let incorrectCount = 0;

        // DOM elements
        const cardsContainer = document.getElementById('cards');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const checkBtn = document.getElementById('checkBtn');
        const feedbackDiv = document.getElementById('feedback');
        const explanationDiv = document.getElementById('explanation');
        const currentCardSpan = document.getElementById('currentCard');
        const totalCardsSpan = document.getElementById('totalCards');
        const totalCardsProgressSpan = document.getElementById('totalCardsProgress');
        const correctAnswersSpan = document.getElementById('correctAnswers');
        const incorrectAnswersSpan = document.getElementById('incorrectAnswers');

        // Initialize flashcards
        function initFlashcards() {
            cardsContainer.innerHTML = '';
            
            flashcardData.forEach((data, index) => {
                const card = document.createElement('div');
                card.className = `card ${index === 0 ? 'active' : ''}`;
                
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.textContent = data.question;
                
                const optionsList = document.createElement('ul');
                optionsList.className = 'options';
                
                data.options.forEach((option, optionIndex) => {
                    const optionItem = document.createElement('li');
                    optionItem.className = 'option';
                    optionItem.textContent = option;
                    optionItem.dataset.index = optionIndex;
                    
                    optionItem.addEventListener('click', () => {
                        if (answered) return;
                        
                        document.querySelectorAll('.card.active .option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        optionItem.classList.add('selected');
                        selectedOption = option.charAt(0);
                    });
                    
                    optionsList.appendChild(optionItem);
                });
                
                card.appendChild(questionDiv);
                card.appendChild(optionsList);
                cardsContainer.appendChild(card);
            });
            
            totalCardsSpan.textContent = flashcardData.length;
            totalCardsProgressSpan.textContent = flashcardData.length;
            updateCardCounter();
        }

        // Check answer
        function checkAnswer() {
            if (answered || selectedOption === null) return;
            
            const correctAnswer = flashcardData[currentCardIndex].correctAnswer;
            const isCorrect = selectedOption === correctAnswer;
            
            // Mark options as correct/incorrect
            document.querySelectorAll('.card.active .option').forEach(option => {
                const optionLetter = option.textContent.charAt(0);
                
                if (optionLetter === correctAnswer) {
                    option.classList.add('correct');
                } else if (optionLetter === selectedOption && selectedOption !== correctAnswer) {
                    option.classList.add('incorrect');
                }
            });
            
            // Show feedback
            feedbackDiv.textContent = isCorrect 
                ? "Correct! Well done." 
                : `Incorrect. The correct answer is ${correctAnswer}.`;
            feedbackDiv.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedbackDiv.style.display = 'block';
            
            // Show explanation
            explanationDiv.textContent = flashcardData[currentCardIndex].explanation;
            explanationDiv.style.display = 'block';
            
            // Update stats
            if (isCorrect) {
                correctCount++;
                correctAnswersSpan.textContent = correctCount;
            } else {
                incorrectCount++;
                incorrectAnswersSpan.textContent = incorrectCount;
            }
            
            // Enable next button
            nextBtn.disabled = currentCardIndex >= flashcardData.length - 1;
            checkBtn.disabled = true;
            
            answered = true;
        }

        // Navigate to next card
        function nextCard() {
            if (currentCardIndex >= flashcardData.length - 1) return;
            
            document.querySelector('.card.active').classList.remove('active');
            currentCardIndex++;
            document.querySelectorAll('.card')[currentCardIndex].classList.add('active');
            
            resetCardState();
            updateCardCounter();
        }

        // Navigate to previous card
        function prevCard() {
            if (currentCardIndex <= 0) return;
            
            document.querySelector('.card.active').classList.remove('active');
            currentCardIndex--;
            document.querySelectorAll('.card')[currentCardIndex].classList.add('active');
            
            resetCardState();
            updateCardCounter();
        }

        // Reset card state
        function resetCardState() {
            selectedOption = null;
            answered = false;
            feedbackDiv.style.display = 'none';
            explanationDiv.style.display = 'none';
            checkBtn.disabled = false;
            prevBtn.disabled = currentCardIndex <= 0;
            nextBtn.disabled = !answered && currentCardIndex < flashcardData.length - 1;
        }

        // Update card counter
        function updateCardCounter() {
            currentCardSpan.textContent = currentCardIndex + 1;
            prevBtn.disabled = currentCardIndex <= 0;
        }

        // Add event listeners
        checkBtn.addEventListener('click', checkAnswer);
        nextBtn.addEventListener('click', nextCard);
        prevBtn.addEventListener('click', prevCard);

        // Initialize
        initFlashcards();

        // Parse flashcard data from Markdown
        function parseMarkdownToFlashcards(markdown) {
            const flashcards = [];
            const questionBlocks = markdown.split('## Question');
            
            // Skip the first item if it's empty
            for (let i = 1; i < questionBlocks.length; i++) {
                const block = questionBlocks[i];
                
                // Extract question number, text, options, and correct answer
                const questionMatch = block.match(/<p><b>(\d+)\.<\/b> (.*?)<\/p>/);
                if (!questionMatch) continue;
                
                const questionNumber = questionMatch[1];
                const questionText = questionMatch[2];
                
                // Extract options
                const optionsMatch = block.match(/<ul class="qlist">([\s\S]*?)<\/ul>/);
                if (!optionsMatch) continue;
                
                const optionsHtml = optionsMatch[1];
                const optionsRegex = /<li>(.*?)<\/li>/g;
                let optionMatch;
                const options = [];
                
                while ((optionMatch = optionsRegex.exec(optionsHtml)) !== null) {
                    options.push(optionMatch[1]);
                }
                
                // Extract correct answer
                const answerMatch = block.match(/<p><strong>Correct Answer:<\/strong> (.*?)<\/p>/);
                if (!answerMatch) continue;
                
                const correctAnswer = answerMatch[1];
                
                // Extract explanation (if available)
                let explanation = "";
                const explanationMatch = block.match(/<p><strong>Explanation:<\/strong><\/p>\s*<p>(.*?)<\/p>/);
                if (explanationMatch) {
                    explanation = explanationMatch[1];
                }
                
                flashcards.push({
                    question: `${questionNumber}. ${questionText}`,
                    options: options,
                    correctAnswer: correctAnswer,
                    explanation: explanation || `Explanation for question ${questionNumber}.`
                });
            }
            
            return flashcards;
        }

        // Function to load markdown content
        function loadMarkdownContent(markdownContent) {
            const parsedFlashcards = parseMarkdownToFlashcards(markdownContent);
            
            if (parsedFlashcards.length > 0) {
                // Replace the sample data with parsed data
                flashcardData.length = 0;
                parsedFlashcards.forEach(card => flashcardData.push(card));
                
                // Reinitialize the flashcards
                currentCardIndex = 0;
                selectedOption = null;
                answered = false;
                correctCount = 0;
                incorrectCount = 0;
                correctAnswersSpan.textContent = '0';
                incorrectAnswersSpan.textContent = '0';
                
                initFlashcards();
            }
        }

        // For demonstration purposes, you can uncomment this to allow users to load their own Markdown file
        /*
        // Add file input for loading markdown
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.id = 'markdownFile';
        fileInput.accept = '.md';
        document.body.insertBefore(fileInput, document.querySelector('h1').nextSibling);
        
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                loadMarkdownContent(content);
            };
            reader.readAsText(file);
        });
        */
    </script>
</body>
</html>
